export default `<style type="text/css">
<!--
span.cls_002{font-family:Arial,serif;font-size:9.7px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_002{font-family:Arial,serif;font-size:9.7px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_003{font-size:15.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_003{font-size:15.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_004{font-size:10.3px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_004{font-size:10.3px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_005{font-family:Arial,serif;font-size:9.7px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_005{font-family:Arial,serif;font-size:9.7px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_006{font-size:13.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_006{font-size:13.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_007{font-family:Arial,serif;font-size:10.3px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_007{font-family:Arial,serif;font-size:10.3px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_008{font-size:10.3px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
div.cls_008{font-size:10.3px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
span.cls_009{font-size:10.3px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_009{font-size:10.3px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_010{font-size:10.3px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_010{font-size:10.3px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_011{font-family:"Consolas",serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_011{font-family:"Consolas",serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_012{font-family:"Consolas",serif;font-size:10.6px;color:rgb(32,144,97);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_012{font-family:"Consolas",serif;font-size:10.6px;color:rgb(32,144,97);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_013{font-family:"Consolas",serif;font-size:10.6px;color:rgb(64,160,111);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_013{font-family:"Consolas",serif;font-size:10.6px;color:rgb(64,160,111);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_014{font-family:"Consolas",serif;font-size:10.1px;color:rgb(148,64,32);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_014{font-family:"Consolas",serif;font-size:10.1px;color:rgb(148,64,32);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_015{font-family:"Consolas",serif;font-size:10.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_015{font-family:"Consolas",serif;font-size:10.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_016{font-family:"Consolas Bold",serif;font-size:10.1px;color:rgb(68,84,135);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_016{font-family:"Consolas Bold",serif;font-size:10.1px;color:rgb(68,84,135);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_017{font-family:"Consolas",serif;font-size:10.1px;color:rgb(32,144,97);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_017{font-family:"Consolas",serif;font-size:10.1px;color:rgb(32,144,97);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_018{font-family:"Consolas",serif;font-size:10.1px;color:rgb(0,0,255);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_018{font-family:"Consolas",serif;font-size:10.1px;color:rgb(0,0,255);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_019{font-family:"Consolas",serif;font-size:10.1px;color:rgb(64,160,111);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_019{font-family:"Consolas",serif;font-size:10.1px;color:rgb(64,160,111);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_020{font-family:"Consolas Italic",serif;font-size:10.1px;color:rgb(64,128,128);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_020{font-family:"Consolas Italic",serif;font-size:10.1px;color:rgb(64,128,128);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_021{font-family:"Consolas Bold",serif;font-size:10.1px;color:rgb(153,153,153);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_021{font-family:"Consolas Bold",serif;font-size:10.1px;color:rgb(153,153,153);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_022{font-size:10.3px;color:rgb(17,84,204);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_022{font-size:10.3px;color:rgb(17,84,204);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_023{font-size:10.3px;color:rgb(17,84,204);font-weight:normal;font-style:normal;text-decoration: underline}
div.cls_023{font-size:10.3px;color:rgb(17,84,204);font-weight:normal;font-style:normal;text-decoration: none}
-->
</style>
<script type="text/javascript" src="spineXR/image/wz_jsgraphics.js"></script>
</head>
<body>
<div style="position:relative;left:50%;margin-left:-306px;top:0px;width:612px;height:440px;overflow:hidden;z-index: 100;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background1.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:210.38px;top:275.08px" class="cls_003"><span class="cls_003">VINDR-SPINEXR MANUAL</span></div>
<div style="position:absolute;left:206.00px;top:344.75px" class="cls_004"><span class="cls_004">Version:</span></div>
<div style="position:absolute;left:256.50px;top:344.75px" class="cls_004"><span class="cls_004">1.1</span></div>
<div style="position:absolute;left:220.01px;top:369.80px" class="cls_004"><span class="cls_004">Date:</span></div>
<div style="position:absolute;left:256.50px;top:369.80px" class="cls_004"><span class="cls_004">September 14, 2021</span></div>
<div style="position:absolute;left:185.02px;top:394.85px" class="cls_004"><span class="cls_004">Prepared by:</span></div>
<div style="position:absolute;left:256.50px;top:394.85px" class="cls_004"><span class="cls_004">Ha Q. Nguyen, Hieu T. Nguyen</span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">1</span></div>
</div>
<div style="position:relative;left:50%;margin-left:-306px;top:-50px;width:612px;height:440px;overflow:hidden;z-index: 99;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background2.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:72.00px;top:71.14px" class="cls_006"><span class="cls_006">1.  Introduction</span></div>
<div style="position:absolute;left:72.00px;top:94.39px" class="cls_004"><span class="cls_004">VinDr-SpineXR is a Computer-Aided Diagnosis (CAD) software that automatically analyzes a</span></div>
<div style="position:absolute;left:72.00px;top:110.26px" class="cls_004"><span class="cls_004">spinal radiograph in DICOM format and notifies users of the presence of abnormalities in the</span></div>
<div style="position:absolute;left:72.00px;top:126.13px" class="cls_004"><span class="cls_004">image. The primary benefit of the software is the ability to reduce the time it takes to alert</span></div>
<div style="position:absolute;left:72.00px;top:142.00px" class="cls_004"><span class="cls_004">radiologists/physicians to the presence of an anomaly. The software does not recommend</span></div>
<div style="position:absolute;left:72.00px;top:157.87px" class="cls_004"><span class="cls_004">treatment or provide a diagnosis. It is only meant as a tool to assist in improving workload</span></div>
<div style="position:absolute;left:72.00px;top:173.74px" class="cls_004"><span class="cls_004">prioritization of suspicious cases. The final diagnosis is provided by a radiologist/physician after</span></div>
<div style="position:absolute;left:72.00px;top:189.61px" class="cls_004"><span class="cls_004">reviewing the scan on his/her own.</span></div>
<div style="position:absolute;left:72.00px;top:221.34px" class="cls_004"><span class="cls_004">The analysis of VinDr-SpineXR includes:</span></div>
<div style="position:absolute;left:99.00px;top:237.26px" class="cls_007"><span class="cls_007">●</span><span class="cls_004">  A lesion detection: each lesion on each image is surrounded with a rectangle and</span></div>
<div style="position:absolute;left:117.00px;top:253.14px" class="cls_004"><span class="cls_004">labeled with one of the pre-defined lesion classes as indicated in Section 3;</span></div>
<div style="position:absolute;left:99.00px;top:269.06px" class="cls_007"><span class="cls_007">●</span><span class="cls_004">  An image classification: indicating whether the depicted spine is abnormal based on the</span></div>
<div style="position:absolute;left:117.00px;top:284.94px" class="cls_004"><span class="cls_004">given image.</span></div>
<div style="position:absolute;left:72.00px;top:300.81px" class="cls_004"><span class="cls_004">A visualization of analysis results of VinDr-SpineXR is shown in Figure</span></div>
<div style="position:absolute;left:464.67px;top:300.81px" class="cls_004"><span class="cls_004">1.  We provide</span></div>
<div style="position:absolute;left:72.00px;top:316.68px" class="cls_004"><span class="cls_004">quantitative performances of the lesion detection and the image classification on a test dataset in</span></div>
<div style="position:absolute;left:72.00px;top:332.55px" class="cls_004"><span class="cls_004">Section 6.</span></div>
<div style="position:absolute;left:72.00px;top:364.28px" class="cls_004"><span class="cls_004">VinDr-SpineXR is distributed as an Application Programming Interface (API). The input to the</span></div>
<div style="position:absolute;left:72.00px;top:380.15px" class="cls_004"><span class="cls_004">API is a spinal image in DICOM format that satisfies the validation dictated in Section 2. The</span></div>
<div style="position:absolute;left:72.00px;top:396.02px" class="cls_004"><span class="cls_004">output of the API is a JSON (JavaScript Object Notation) file with the structure given in Section</span></div>
<div style="position:absolute;left:72.00px;top:411.89px" class="cls_004"><span class="cls_004">4. A snippet of Python code is provided in Section 5 to illustrate how the API should be called.</span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">2</span></div>
</div>
<div style="position:relative;left:50%;margin-left:-306px;top:-100px;width:612px;height:661px;overflow:hidden;z-index: 98;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background3.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:175.40px;top:71.20px" class="cls_008"><span class="cls_008">Figure 1.</span><span class="cls_009"> A visualization of VinDr-SpineXR’s analysis results.</span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">3</span></div>
</div>
<div style="position:relative;left:50%;margin-left:-306px;top:-150px;width:612px;height:718px;overflow:hidden;z-index: 97;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background4.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:72.00px;top:71.14px" class="cls_006"><span class="cls_006">2.  Input validation</span></div>
<div style="position:absolute;left:90.00px;top:94.39px" class="cls_004"><span class="cls_004">An input to VinDr-SpineXR must be a DICOM image that depicts cervical, thoracic or</span></div>
<div style="position:absolute;left:90.00px;top:110.26px" class="cls_004"><span class="cls_004">lumbar spine. Table 1 gives the full list of DICOM tags that VinDr-SpineXR requires for a</span></div>
<div style="position:absolute;left:90.00px;top:126.13px" class="cls_004"><span class="cls_004">valid DICOM image.</span></div>
<div style="position:absolute;left:156.07px;top:171.09px" class="cls_008"><span class="cls_008">Table 1</span><span class="cls_009">. List of required DICOM tags for the input to VinDr-SpineXR.</span></div>
<div style="position:absolute;left:112.80px;top:194.64px" class="cls_010"><span class="cls_010">Tag</span></div>
<div style="position:absolute;left:230.96px;top:194.64px" class="cls_010"><span class="cls_010">Keyword</span></div>
<div style="position:absolute;left:396.66px;top:194.64px" class="cls_010"><span class="cls_010">Required Value</span></div>
<div style="position:absolute;left:86.25px;top:225.97px" class="cls_004"><span class="cls_004">(0028,1050)</span></div>
<div style="position:absolute;left:168.75px;top:225.97px" class="cls_004"><span class="cls_004">WindowCenter</span></div>
<div style="position:absolute;left:351.00px;top:225.97px" class="cls_004"><span class="cls_004">Non-empty</span></div>
<div style="position:absolute;left:86.25px;top:258.97px" class="cls_004"><span class="cls_004">(0028,1052)</span></div>
<div style="position:absolute;left:168.75px;top:258.97px" class="cls_004"><span class="cls_004">RescaleIntercept</span></div>
<div style="position:absolute;left:351.00px;top:258.97px" class="cls_004"><span class="cls_004">Non-empty</span></div>
<div style="position:absolute;left:86.25px;top:290.30px" class="cls_004"><span class="cls_004">(0028,0004)</span></div>
<div style="position:absolute;left:168.75px;top:290.30px" class="cls_004"><span class="cls_004">PhotometricInterpretation</span></div>
<div style="position:absolute;left:351.00px;top:290.30px" class="cls_004"><span class="cls_004">Non-empty</span></div>
<div style="position:absolute;left:86.25px;top:321.63px" class="cls_004"><span class="cls_004">(0028,1051)</span></div>
<div style="position:absolute;left:168.75px;top:321.63px" class="cls_004"><span class="cls_004">WindowWidth</span></div>
<div style="position:absolute;left:351.00px;top:321.63px" class="cls_004"><span class="cls_004">Non-empty</span></div>
<div style="position:absolute;left:86.25px;top:352.96px" class="cls_004"><span class="cls_004">(0028,1053)</span></div>
<div style="position:absolute;left:168.75px;top:352.96px" class="cls_004"><span class="cls_004">RescaleSlope</span></div>
<div style="position:absolute;left:351.00px;top:352.96px" class="cls_004"><span class="cls_004">Non-empty</span></div>
<div style="position:absolute;left:72.00px;top:397.30px" class="cls_006"><span class="cls_006">3.  Identifiable abnormalities</span></div>
<div style="position:absolute;left:90.00px;top:420.56px" class="cls_004"><span class="cls_004">VinDr-SpineXR  is  capable  of  analyzing</span></div>
<div style="position:absolute;left:306.49px;top:420.56px" class="cls_004"><span class="cls_004">6</span></div>
<div style="position:absolute;left:319.99px;top:420.56px" class="cls_004"><span class="cls_004">types  of abnormalities, namely disc space</span></div>
<div style="position:absolute;left:90.00px;top:436.43px" class="cls_004"><span class="cls_004">narrowing, foraminal stenosis, osteophytes, spondylolysthesis, surgical implant, vertebral</span></div>
<div style="position:absolute;left:90.00px;top:452.30px" class="cls_004"><span class="cls_004">collapse. Any lesion of one of the provided classes will be localized on each image by a</span></div>
<div style="position:absolute;left:90.00px;top:468.17px" class="cls_004"><span class="cls_004">bounding box. The output of this API also includes a binary classification of abnormality at</span></div>
<div style="position:absolute;left:90.00px;top:484.04px" class="cls_004"><span class="cls_004">the image level. Noting that there may be cases where the image classification is abnormal</span></div>
<div style="position:absolute;left:90.00px;top:499.91px" class="cls_004"><span class="cls_004">but no lesion is given since the lesion appeared in the image may not belong to any of the 6</span></div>
<div style="position:absolute;left:90.00px;top:515.77px" class="cls_004"><span class="cls_004">types aforementioned.</span></div>
<div style="position:absolute;left:72.00px;top:551.58px" class="cls_006"><span class="cls_006">4.  Output format</span></div>
<div style="position:absolute;left:108.00px;top:574.83px" class="cls_004"><span class="cls_004">For an valid spinal image, VinDr-SpineXR returns:</span></div>
<div style="position:absolute;left:126.00px;top:590.76px" class="cls_007"><span class="cls_007">●</span><span class="cls_004">  Abnormality probability of the spine in the given image.</span></div>
<div style="position:absolute;left:126.00px;top:606.68px" class="cls_007"><span class="cls_007">●</span><span class="cls_004">  Lesions in the image with the name, probability, and bounding box coordinates.</span></div>
<div style="position:absolute;left:108.00px;top:638.43px" class="cls_004"><span class="cls_004">Detailed description of the output format:</span></div>
<div style="position:absolute;left:126.00px;top:654.35px" class="cls_007"><span class="cls_007">●</span><span class="cls_010">  status</span><span class="cls_004">: status of the result.</span></div>
<div style="position:absolute;left:126.00px;top:670.28px" class="cls_007"><span class="cls_007">●</span><span class="cls_010">  results</span><span class="cls_004">: outputs of the module.</span></div>
<div style="position:absolute;left:126.00px;top:686.21px" class="cls_007"><span class="cls_007">●</span><span class="cls_010">  global</span><span class="cls_004">: The analysis at image level.</span></div>
<div style="position:absolute;left:162.00px;top:702.14px" class="cls_007"><span class="cls_007">○</span><span class="cls_010">  abnormal</span><span class="cls_004">: The probability for the abnormality of the image.</span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">4</span></div>
</div>
<div style="position:relative;left:50%;margin-left:-306px;top:-235px;width:612px;height:709px;overflow:hidden;z-index: 96;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background5.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:126.00px;top:87.12px" class="cls_007"><span class="cls_007">●</span><span class="cls_010">  local</span><span class="cls_004">: The list of lesions predicted in the corresponding image.</span></div>
<div style="position:absolute;left:162.00px;top:103.05px" class="cls_007"><span class="cls_007">○</span><span class="cls_010">  name</span><span class="cls_004">: Label of the lesion, e.g. Mass, Calcification, or Lymph Node.</span></div>
<div style="position:absolute;left:162.00px;top:118.98px" class="cls_007"><span class="cls_007">○</span><span class="cls_010">  prob</span><span class="cls_004">: The probability of the lesion.</span></div>
<div style="position:absolute;left:162.00px;top:134.91px" class="cls_007"><span class="cls_007">○</span><span class="cls_010">  start</span><span class="cls_004">: The top-left corner of the bounding box, specified by x and y</span></div>
<div style="position:absolute;left:180.00px;top:150.79px" class="cls_004"><span class="cls_004">coordinates.</span></div>
<div style="position:absolute;left:162.00px;top:166.71px" class="cls_007"><span class="cls_007">○</span><span class="cls_010">  end</span><span class="cls_004">: The bottom-right corner of the bounding box, specified x and y</span></div>
<div style="position:absolute;left:180.00px;top:182.59px" class="cls_004"><span class="cls_004">coordinates.</span></div>
<div style="position:absolute;left:108.00px;top:214.32px" class="cls_004"><span class="cls_004">An example of the prediction results in JSON format is shown in the following snippet.</span></div>
<div style="position:absolute;left:77.25px;top:235.33px" class="cls_011"><span class="cls_011">{</span></div>
<div style="position:absolute;left:83.02px;top:249.47px" class="cls_011"><span class="cls_011">"status":</span><span class="cls_012"> "DONE"</span><span class="cls_011">,</span></div>
<div style="position:absolute;left:83.02px;top:263.61px" class="cls_011"><span class="cls_011">"result": {</span></div>
<div style="position:absolute;left:94.57px;top:277.75px" class="cls_011"><span class="cls_011">"global": {</span></div>
<div style="position:absolute;left:106.11px;top:291.89px" class="cls_011"><span class="cls_011">"Abnormal":</span><span class="cls_012"> "0.9458446067208742"</span></div>
<div style="position:absolute;left:94.57px;top:306.03px" class="cls_011"><span class="cls_011">},</span></div>
<div style="position:absolute;left:94.57px;top:320.16px" class="cls_011"><span class="cls_011">"local": [</span></div>
<div style="position:absolute;left:106.11px;top:334.30px" class="cls_011"><span class="cls_011">{</span></div>
<div style="position:absolute;left:117.66px;top:348.44px" class="cls_011"><span class="cls_011">"prob": [</span><span class="cls_012">"0.870137631893158"</span><span class="cls_011">],</span></div>
<div style="position:absolute;left:117.66px;top:362.58px" class="cls_011"><span class="cls_011">"name": [</span><span class="cls_012">"Osteophytes"</span><span class="cls_011">],</span></div>
<div style="position:absolute;left:117.66px;top:376.72px" class="cls_011"><span class="cls_011">"start": {"x":</span><span class="cls_013"> 475</span><span class="cls_011">, "y":</span><span class="cls_013"> 1059</span><span class="cls_011">},</span></div>
<div style="position:absolute;left:117.66px;top:390.86px" class="cls_011"><span class="cls_011">"end": {"x":</span><span class="cls_013"> 518</span><span class="cls_011">, "y":</span><span class="cls_013"> 1136</span><span class="cls_011">}</span></div>
<div style="position:absolute;left:106.11px;top:405.00px" class="cls_011"><span class="cls_011">},</span></div>
<div style="position:absolute;left:106.11px;top:419.13px" class="cls_011"><span class="cls_011">{</span></div>
<div style="position:absolute;left:117.66px;top:433.27px" class="cls_011"><span class="cls_011">"prob": [</span><span class="cls_012">"0.3671632409095764"</span><span class="cls_011">],</span></div>
<div style="position:absolute;left:117.66px;top:447.41px" class="cls_011"><span class="cls_011">"name": [</span><span class="cls_012">"Disc space narrowing"</span><span class="cls_011">],</span></div>
<div style="position:absolute;left:117.66px;top:461.55px" class="cls_011"><span class="cls_011">"start": {"x":</span><span class="cls_013"> 479</span><span class="cls_011">, "y":</span><span class="cls_013"> 1039</span><span class="cls_011">},</span></div>
<div style="position:absolute;left:117.66px;top:475.69px" class="cls_011"><span class="cls_011">"end": {"x":</span><span class="cls_013"> 642</span><span class="cls_011">, "y":</span><span class="cls_013"> 1122</span><span class="cls_011">}</span></div>
<div style="position:absolute;left:106.11px;top:489.83px" class="cls_011"><span class="cls_011">}</span></div>
<div style="position:absolute;left:94.57px;top:503.97px" class="cls_011"><span class="cls_011">]</span></div>
<div style="position:absolute;left:83.02px;top:518.10px" class="cls_011"><span class="cls_011">}</span></div>
<div style="position:absolute;left:77.25px;top:532.24px" class="cls_011"><span class="cls_011">}</span></div>
<div style="position:absolute;left:72.00px;top:586.22px" class="cls_006"><span class="cls_006">5.  API Call</span></div>
<div style="position:absolute;left:90.00px;top:609.48px" class="cls_004"><span class="cls_004">The following snippet of Python code illustrates how the VinDr-SpineXR API should be</span></div>
<div style="position:absolute;left:90.00px;top:625.35px" class="cls_004"><span class="cls_004">called.</span></div>
<div style="position:absolute;left:77.25px;top:662.27px" class="cls_014"><span class="cls_014">import</span><span class="cls_015"> requests</span></div>
<div style="position:absolute;left:77.25px;top:675.73px" class="cls_014"><span class="cls_014">from</span><span class="cls_015"> io</span><span class="cls_014"> import</span><span class="cls_015"> BytesIO</span></div>
<div style="position:absolute;left:77.25px;top:689.20px" class="cls_014"><span class="cls_014">from</span><span class="cls_015"> loguru</span><span class="cls_014"> import</span><span class="cls_015"> logger</span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">5</span></div>
</div>
<div style="position:relative;left:50%;margin-left:-306px;top:-312px;width:612px;height:716px;overflow:hidden;z-index: 95;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background6.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:77.25px;top:76.39px" class="cls_014"><span class="cls_014">from</span><span class="cls_015"> pydicom</span><span class="cls_014"> import</span><span class="cls_015"> dcmread, dcmwrite</span></div>
<div style="position:absolute;left:77.25px;top:89.85px" class="cls_014"><span class="cls_014">from</span><span class="cls_015"> pydicom.filebase</span><span class="cls_014"> import</span><span class="cls_015"> DicomFileLike</span></div>
<div style="position:absolute;left:77.25px;top:103.32px" class="cls_014"><span class="cls_014">from</span><span class="cls_015"> tenacity</span><span class="cls_014"> import</span><span class="cls_015"> retry, stop_after_attempt, wait_fixed, after_log</span></div>
<div style="position:absolute;left:77.25px;top:143.71px" class="cls_014"><span class="cls_014">class</span><span class="cls_016"> InstanceWorkflow</span><span class="cls_015">:</span></div>
<div style="position:absolute;left:99.23px;top:157.18px" class="cls_015"><span class="cls_015">ai_model =</span><span class="cls_017"> "spinexr"</span></div>
<div style="position:absolute;left:99.23px;top:170.64px" class="cls_015"><span class="cls_015">api_key =</span><span class="cls_017"> "YOUR API KEY"</span></div>
<div style="position:absolute;left:99.23px;top:184.11px" class="cls_015"><span class="cls_015">VINDR_AI_URL =</span><span class="cls_017"> "<A HREF="https://apiserver.vindr.ai"/">https://apiserver.vindr.ai"</A> </span></div>
<div style="position:absolute;left:99.23px;top:197.57px" class="cls_015"><span class="cls_015">result = {}</span></div>
<div style="position:absolute;left:99.23px;top:224.50px" class="cls_014"><span class="cls_014">def</span><span class="cls_016"> __init__</span><span class="cls_018">(self, dicom_file_path)</span><span class="cls_015">:</span></div>
<div style="position:absolute;left:121.22px;top:237.97px" class="cls_015"><span class="cls_015">self.dicom_files = {}</span></div>
<div style="position:absolute;left:121.22px;top:251.44px" class="cls_015"><span class="cls_015">dicom_file = dcmread(dicom_file_path)</span></div>
<div style="position:absolute;left:121.22px;top:264.90px" class="cls_015"><span class="cls_015">dicom_bytes = self.convert_dataset_to_bytes(dicom_file)</span></div>
<div style="position:absolute;left:121.22px;top:278.37px" class="cls_015"><span class="cls_015">self.dicom_files[</span><span class="cls_017">"file"</span><span class="cls_015">] = dicom_bytes</span></div>
<div style="position:absolute;left:99.23px;top:305.30px" class="cls_014"><span class="cls_014">def</span><span class="cls_016"> convert_dataset_to_bytes</span><span class="cls_018">(self, dataset)</span><span class="cls_015">:</span></div>
<div style="position:absolute;left:121.22px;top:318.76px" class="cls_014"><span class="cls_014">with</span><span class="cls_015"> BytesIO()</span><span class="cls_014"> as</span><span class="cls_015"> buffer:</span></div>
<div style="position:absolute;left:143.20px;top:332.23px" class="cls_015"><span class="cls_015">ds = DicomFileLike(buffer)</span></div>
<div style="position:absolute;left:143.20px;top:345.69px" class="cls_015"><span class="cls_015">dcmwrite(ds, dataset)</span></div>
<div style="position:absolute;left:143.20px;top:359.16px" class="cls_015"><span class="cls_015">ds.seek(</span><span class="cls_019">0</span><span class="cls_015">)</span></div>
<div style="position:absolute;left:143.20px;top:372.62px" class="cls_014"><span class="cls_014">return</span><span class="cls_015"> ds.read()</span></div>
<div style="position:absolute;left:99.23px;top:399.55px" class="cls_014"><span class="cls_014">def</span><span class="cls_016"> call</span><span class="cls_018">(self)</span><span class="cls_015">:</span></div>
<div style="position:absolute;left:121.22px;top:413.02px" class="cls_015"><span class="cls_015">r = requests.Session()</span></div>
<div style="position:absolute;left:121.22px;top:426.48px" class="cls_015"><span class="cls_015">r.headers = {</span></div>
<div style="position:absolute;left:143.20px;top:439.95px" class="cls_017"><span class="cls_017">"X-API-KEY"</span><span class="cls_015">: self.api_key,</span></div>
<div style="position:absolute;left:121.22px;top:453.42px" class="cls_015"><span class="cls_015">}</span></div>
<div style="position:absolute;left:121.22px;top:480.35px" class="cls_020"><span class="cls_020"># Calling the API, obtaining the job_id to track the analysis process</span></div>
<div style="position:absolute;left:121.22px;top:493.81px" class="cls_015"><span class="cls_015">res = r.post(</span></div>
<div style="position:absolute;left:143.20px;top:507.28px" class="cls_017"><span class="cls_017">f"</span><span class="cls_014">{self.VINDR_AI_URL}</span><span class="cls_017">/diagnosis/</span><span class="cls_014">{self.ai_model}</span><span class="cls_017">"</span><span class="cls_015">,</span></div>
<div style="position:absolute;left:143.20px;top:520.74px" class="cls_015"><span class="cls_015">files=self.dicom_files,</span></div>
<div style="position:absolute;left:121.22px;top:534.21px" class="cls_015"><span class="cls_015">)</span></div>
<div style="position:absolute;left:121.22px;top:547.67px" class="cls_014"><span class="cls_014">if</span><span class="cls_015"> res.status_code !=</span><span class="cls_019"> 200</span><span class="cls_015">:</span></div>
<div style="position:absolute;left:143.20px;top:561.14px" class="cls_015"><span class="cls_015">print(</span><span class="cls_017">f"Response body:</span><span class="cls_014"> {res.text}</span><span class="cls_017">"</span><span class="cls_015">)</span></div>
<div style="position:absolute;left:121.22px;top:574.60px" class="cls_015"><span class="cls_015">res.raise_for_status()</span></div>
<div style="position:absolute;left:121.22px;top:588.07px" class="cls_015"><span class="cls_015">job_id = res.json()[</span><span class="cls_017">"job_id"</span><span class="cls_015">]</span></div>
<div style="position:absolute;left:121.22px;top:615.00px" class="cls_020"><span class="cls_020"># Polling until the analysis process finishes.</span></div>
<div style="position:absolute;left:121.22px;top:628.46px" class="cls_021"><span class="cls_021">@retry(</span></div>
<div style="position:absolute;left:143.20px;top:641.93px" class="cls_015"><span class="cls_015">stop=stop_after_attempt(</span><span class="cls_019">1000</span><span class="cls_015">),</span></div>
<div style="position:absolute;left:143.20px;top:655.40px" class="cls_015"><span class="cls_015">wait=wait_fixed(</span><span class="cls_019">5</span><span class="cls_015">),</span></div>
<div style="position:absolute;left:143.20px;top:668.86px" class="cls_015"><span class="cls_015">after=after_log(logger, logging.DEBUG),</span></div>
<div style="position:absolute;left:121.22px;top:682.33px" class="cls_015"><span class="cls_015">)</span></div>
<div style="position:absolute;left:121.22px;top:695.79px" class="cls_014"><span class="cls_014">def</span><span class="cls_016"> check_result</span><span class="cls_018">()</span><span class="cls_015">:</span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">6</span></div>
</div>
<div style="position:relative;left:50%;margin-left:-306px;top:-385px;width:612px;height:569px;overflow:hidden;z-index: 94;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background7.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:143.20px;top:76.39px" class="cls_015"><span class="cls_015">res = r.get(</span></div>
<div style="position:absolute;left:165.18px;top:89.85px" class="cls_017"><span class="cls_017">f"</span><span class="cls_014">{self.VINDR_AI_URL}</span><span class="cls_017">/jobs/</span><span class="cls_014">{job_id}</span><span class="cls_017">"</span><span class="cls_015">,</span></div>
<div style="position:absolute;left:143.20px;top:103.32px" class="cls_015"><span class="cls_015">)</span></div>
<div style="position:absolute;left:143.20px;top:116.78px" class="cls_015"><span class="cls_015">job = res.json()</span></div>
<div style="position:absolute;left:143.20px;top:130.25px" class="cls_014"><span class="cls_014">if</span><span class="cls_015"> job.get(</span><span class="cls_017">"status"</span><span class="cls_015">)</span><span class="cls_014"> not in</span><span class="cls_015"> {</span><span class="cls_017">"DONE"</span><span class="cls_015">,</span><span class="cls_017"> "FAIL"</span><span class="cls_015">}:</span></div>
<div style="position:absolute;left:165.18px;top:143.71px" class="cls_014"><span class="cls_014">raise</span><span class="cls_015"> Exception(</span><span class="cls_017">"Retry in 1s"</span><span class="cls_015">)</span></div>
<div style="position:absolute;left:121.22px;top:157.18px" class="cls_015"><span class="cls_015">check_result()</span></div>
<div style="position:absolute;left:121.22px;top:184.11px" class="cls_020"><span class="cls_020"># Retrieving the analysis result</span></div>
<div style="position:absolute;left:121.22px;top:197.57px" class="cls_015"><span class="cls_015">res = r.get(</span></div>
<div style="position:absolute;left:143.20px;top:211.04px" class="cls_017"><span class="cls_017">f"</span><span class="cls_014">{self.VINDR_AI_URL}</span><span class="cls_017">/jobs/</span><span class="cls_014">{job_id}</span><span class="cls_017">/result"</span><span class="cls_015">,</span></div>
<div style="position:absolute;left:121.22px;top:224.50px" class="cls_015"><span class="cls_015">)</span></div>
<div style="position:absolute;left:121.22px;top:237.97px" class="cls_015"><span class="cls_015">res.raise_for_status()</span></div>
<div style="position:absolute;left:121.22px;top:251.44px" class="cls_015"><span class="cls_015">self.result = res.json()</span></div>
<div style="position:absolute;left:77.25px;top:291.83px" class="cls_015"><span class="cls_015">test_api = InstanceWorkflow(</span><span class="cls_017">'path-to-dicom-file'</span><span class="cls_015">)</span></div>
<div style="position:absolute;left:77.25px;top:305.30px" class="cls_015"><span class="cls_015">test_api.call()</span></div>
<div style="position:absolute;left:77.25px;top:318.76px" class="cls_015"><span class="cls_015">print(test_api.result)</span></div>
<div style="position:absolute;left:72.00px;top:389.22px" class="cls_006"><span class="cls_006">6.  Performance data</span></div>
<div style="position:absolute;left:90.00px;top:412.47px" class="cls_004"><span class="cls_004">The performance of VinDr-SpineXR in analyzing spinal radiographs was measured by the</span></div>
<div style="position:absolute;left:90.00px;top:428.34px" class="cls_004"><span class="cls_004">F2-score [1] on a test dataset that were retrospectively collected from several hospitals in</span></div>
<div style="position:absolute;left:90.00px;top:444.21px" class="cls_004"><span class="cls_004">Vietnam. This dataset includes 1,000 studies with 1544 images. The statistics of image-level</span></div>
<div style="position:absolute;left:90.00px;top:460.08px" class="cls_004"><span class="cls_004">abnormality and lesions in the test dataset are given Figure 2 and Table 2, respectively. We</span></div>
<div style="position:absolute;left:90.00px;top:475.95px" class="cls_004"><span class="cls_004">chose F2-score as the metric for both the lesion detection and image-level classification since</span></div>
<div style="position:absolute;left:90.00px;top:491.82px" class="cls_004"><span class="cls_004">it favors the recall (or sensitivity) over the precision. This measurement, therefore, closely</span></div>
<div style="position:absolute;left:90.00px;top:507.68px" class="cls_004"><span class="cls_004">reflects  the  ability  of  VinDr-SpineXR  to  assist  radiologists/physicians in spotting out</span></div>
<div style="position:absolute;left:90.00px;top:523.55px" class="cls_004"><span class="cls_004">abnormalities. Detailed results for the lesion detection and the image-level classification are</span></div>
<div style="position:absolute;left:90.00px;top:539.42px" class="cls_004"><span class="cls_004">given in Tables 3 and 4, respectively. The average processing time is about 40 seconds per</span></div>
<div style="position:absolute;left:90.00px;top:555.29px" class="cls_004"><span class="cls_004">study, not including data transfer.</span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">7</span></div>
</div>
<div style="position:relative;left:50%;margin-left:-306px;top:-437px;width:612px;height:537px;overflow:hidden;z-index: 93;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background8.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:140.51px;top:71.20px" class="cls_008"><span class="cls_008">Figure 2</span><span class="cls_009">. Distribution of image-level abnormality in the test dataset.</span></div>
<div style="position:absolute;left:191.35px;top:312.75px" class="cls_008"><span class="cls_008">Table 2.</span><span class="cls_009"> Number of lesions in the test dataset</span></div>
<div style="position:absolute;left:117.75px;top:339.86px" class="cls_010"><span class="cls_010">Lesion</span></div>
<div style="position:absolute;left:269.25px;top:339.86px" class="cls_010"><span class="cls_010"># Boxes</span></div>
<div style="position:absolute;left:333.00px;top:339.86px" class="cls_010"><span class="cls_010"># Images (with percentage)</span></div>
<div style="position:absolute;left:117.75px;top:364.91px" class="cls_004"><span class="cls_004">Disc space narrowing</span></div>
<div style="position:absolute;left:269.25px;top:364.91px" class="cls_004"><span class="cls_004">384</span></div>
<div style="position:absolute;left:333.00px;top:364.91px" class="cls_004"><span class="cls_004">231 (14.96%)</span></div>
<div style="position:absolute;left:117.75px;top:389.96px" class="cls_004"><span class="cls_004">Foraminal stenosis</span></div>
<div style="position:absolute;left:269.25px;top:389.96px" class="cls_004"><span class="cls_004">73</span></div>
<div style="position:absolute;left:333.00px;top:389.96px" class="cls_004"><span class="cls_004">44 (2.85%)</span></div>
<div style="position:absolute;left:117.75px;top:415.01px" class="cls_004"><span class="cls_004">Osteophytes</span></div>
<div style="position:absolute;left:269.25px;top:415.01px" class="cls_004"><span class="cls_004">2378</span></div>
<div style="position:absolute;left:333.00px;top:415.01px" class="cls_004"><span class="cls_004">767 (49.68%)</span></div>
<div style="position:absolute;left:117.75px;top:440.06px" class="cls_004"><span class="cls_004">Spondylolysthesis</span></div>
<div style="position:absolute;left:269.25px;top:440.06px" class="cls_004"><span class="cls_004">82</span></div>
<div style="position:absolute;left:333.00px;top:440.06px" class="cls_004"><span class="cls_004">71 (4.60%)</span></div>
<div style="position:absolute;left:117.75px;top:465.11px" class="cls_004"><span class="cls_004">Surgical implant</span></div>
<div style="position:absolute;left:269.25px;top:465.11px" class="cls_004"><span class="cls_004">44</span></div>
<div style="position:absolute;left:333.00px;top:465.11px" class="cls_004"><span class="cls_004">33 (2.14%)</span></div>
<div style="position:absolute;left:117.75px;top:490.16px" class="cls_004"><span class="cls_004">Vertebral collapse</span></div>
<div style="position:absolute;left:269.25px;top:490.16px" class="cls_004"><span class="cls_004">98</span></div>
<div style="position:absolute;left:333.00px;top:490.16px" class="cls_004"><span class="cls_004">42 (2.72%)</span></div>
<div style="position:absolute;left:117.75px;top:515.21px" class="cls_004"><span class="cls_004">Absence of all above lesions</span></div>
<div style="position:absolute;left:269.25px;top:515.21px" class="cls_004"><span class="cls_004">-</span></div>
<div style="position:absolute;left:333.00px;top:515.21px" class="cls_004"><span class="cls_004">672 (43.52%)</span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">8</span></div>
</div>
<div style="position:relative;left:50%;margin-left:-306px;margin-bottom:1900px;top:-512px;width:612px;height:570px;overflow:hidden;z-index: 92;">
<div style="position:absolute;left:0px;top:0px">
<img src="spineXR/image/background9.jpg" width=612 height=792></div>
<div style="position:absolute;left:389.08px;top:35.32px" class="cls_002"><span class="cls_002">Confidential - Do not distribute!</span></div>
<div style="position:absolute;left:192.87px;top:105.07px" class="cls_008"><span class="cls_008">Table 3.</span><span class="cls_009"> Performance of the lesion detection of</span></div>
<div style="position:absolute;left:268.53px;top:120.94px" class="cls_009"><span class="cls_009">VinDr-SpineXR</span></div>
<div style="position:absolute;left:192.00px;top:148.06px" class="cls_010"><span class="cls_010">Lesion</span></div>
<div style="position:absolute;left:315.75px;top:148.06px" class="cls_010"><span class="cls_010">Performance (F2)</span></div>
<div style="position:absolute;left:192.00px;top:173.11px" class="cls_004"><span class="cls_004">Disc space narrowing</span></div>
<div style="position:absolute;left:315.75px;top:173.11px" class="cls_004"><span class="cls_004">61%</span></div>
<div style="position:absolute;left:192.00px;top:198.16px" class="cls_004"><span class="cls_004">Foraminal stenosis</span></div>
<div style="position:absolute;left:315.75px;top:198.16px" class="cls_004"><span class="cls_004">68%</span></div>
<div style="position:absolute;left:192.00px;top:223.21px" class="cls_004"><span class="cls_004">Osteophytes</span></div>
<div style="position:absolute;left:315.75px;top:223.21px" class="cls_004"><span class="cls_004">73%</span></div>
<div style="position:absolute;left:192.00px;top:248.25px" class="cls_004"><span class="cls_004">Spondylolysthesis</span></div>
<div style="position:absolute;left:315.75px;top:248.25px" class="cls_004"><span class="cls_004">55%</span></div>
<div style="position:absolute;left:192.00px;top:274.50px" class="cls_004"><span class="cls_004">Surgical implant</span></div>
<div style="position:absolute;left:315.75px;top:274.50px" class="cls_004"><span class="cls_004">81%</span></div>
<div style="position:absolute;left:192.00px;top:299.55px" class="cls_004"><span class="cls_004">Vertebral collapse</span></div>
<div style="position:absolute;left:315.75px;top:299.55px" class="cls_004"><span class="cls_004">64%</span></div>
<div style="position:absolute;left:192.00px;top:324.60px" class="cls_010"><span class="cls_010">Average</span></div>
<div style="position:absolute;left:315.75px;top:324.60px" class="cls_010"><span class="cls_010">67%</span></div>
<div style="position:absolute;left:222.20px;top:379.47px" class="cls_008"><span class="cls_008">Table 4.</span><span class="cls_009"> Performance of the image</span></div>
<div style="position:absolute;left:228.87px;top:395.34px" class="cls_009"><span class="cls_009">classification of VinDr-SpineXR</span></div>
<div style="position:absolute;left:193.50px;top:422.46px" class="cls_010"><span class="cls_010">Class</span></div>
<div style="position:absolute;left:318.00px;top:422.46px" class="cls_010"><span class="cls_010">Performance (F2)</span></div>
<div style="position:absolute;left:193.50px;top:447.51px" class="cls_004"><span class="cls_004">Abnormal</span></div>
<div style="position:absolute;left:318.00px;top:447.51px" class="cls_004"><span class="cls_004">87%</span></div>
<div style="position:absolute;left:72.00px;top:501.69px" class="cls_010"><span class="cls_010">REFERENCES</span></div>
<div style="position:absolute;left:72.00px;top:533.42px" class="cls_004"><span class="cls_004">[1]</span><span class="cls_022"> </span><A HREF="https://en.wikipedia.org/wiki/F-score">https://en.wikipedia.org/wiki/F-score</A> </span></div>
<div style="position:absolute;left:533.89px;top:740.77px" class="cls_005"><span class="cls_005">9</span></div>
</div>
`;
